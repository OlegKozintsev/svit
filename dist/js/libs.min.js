function integralBlurCanvasRGB(t,e,n,r,a,o,i){var l=integralImageFromCanvasRGB(t,0,0,r,a);if(null!=l){var s=l.imageData,c=s.pixels,d=l.context;for(blurIntegralImageRGB(l,o);0<--i;)(l=calculateIntegralImageRGB(c,r,a)).imageData=s,l.context=d,blurIntegralImageRGB(l,o);d.putImageData(s,e,n)}}function updateCanvas(t){t.context.putImageData(t.imageData,0,0)}function blurIntegralImageRGB(t,e){for(var n,r,a,o,i,l,s,c,d,u,h=t,f=h.width,g=h.height,m=h.pixels,p=0,y=0,b=h.r,x=h.g,w=h.b,v=f+1,C=0;C<g;C++){i=(o=g-e<=C?g-C-1:e)-(a=C<e?-C:-e),a*=v,o*=v;for(var k=0;k<f;k++)u=1/(((r=f-e<=k?f-k-1:e)-(n=k<e?-k:-e))*i),l=(n+=p)+a,s=(r+=p)+o,c=n+o,d=r+a,m[y++]=(b[l]+b[s]-b[c]-b[d])*u|0,m[y++]=(x[l]+x[s]-x[c]-x[d])*u|0,m[y++]=(w[l]+w[s]-w[c]-w[d])*u|0,y++,p++;p++}}function integralImageFromCanvasRGB(t,e,n,r,a){var o=getCanvasPixels(t,e,n,r,a);if(null!=o){var i=calculateIntegralImageRGB(o.pixels,r,a);return i.context=o.context,i.imageData=o.imageData,i}}function getCanvasPixels(t,e,n,r,a){var o={id:t,top_x:e,top_y:n,width:r,height:a};o.canvas=document.getElementById(t),o.context=o.canvas.getContext("2d");try{o.imageData=o.context.getImageData(e,n,r,a)}catch(t){return null}return o.pixels=o.imageData.data,o}function calculateIntegralImageRGB(t,e,n){var r=[],a=[],o=[],i=0,l=0;for(y=0;y<n;y++){for(rsum=t[i++],gsum=t[i++],bsum=t[i++],i++,x=0;x<e;x++)r[l]=rsum,a[l]=gsum,o[l++]=bsum,rsum+=t[i++],gsum+=t[i++],bsum+=t[i++],i++;r[l]=rsum,a[l]=gsum,o[l++]=bsum,i-=4}for(var s=e+1,c=s*(n+1),d=s-s;s<c;)r[s]+=r[d],a[s]+=a[d],o[s]+=o[d],s++,d++;return{r:r,g:a,b:o,width:e,height:n,pixels:t}}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function stackBlurCanvasRGB(t,e,n,r,a,o){if(!(isNaN(o)||o<1)){o|=0;var i,l=document.getElementById(t).getContext("2d");try{try{i=l.getImageData(e,n,r,a)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),i=l.getImageData(e,n,r,a)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}var s,c,d,u,h,f,g,m,p,y,b,x,w,v,C,k,I,E,T,R,S=i.data,M=o+o+1,B=r-1,L=a-1,O=o+1,z=O*(O+1)/2,A=new BlurStack,N=A;for(d=1;d<M;d++)if(N=N.next=new BlurStack,d==O)var U=N;N.next=A;var P=null,F=null;g=f=0;var D=mul_table[o],G=shg_table[o];for(c=0;c<a;c++){for(v=C=k=m=p=y=0,b=O*(I=S[f]),x=O*(E=S[f+1]),w=O*(T=S[f+2]),m+=z*I,p+=z*E,y+=z*T,N=A,d=0;d<O;d++)N.r=I,N.g=E,N.b=T,N=N.next;for(d=1;d<O;d++)u=f+((B<d?B:d)<<2),m+=(N.r=I=S[u])*(R=O-d),p+=(N.g=E=S[u+1])*R,y+=(N.b=T=S[u+2])*R,v+=I,C+=E,k+=T,N=N.next;for(P=A,F=U,s=0;s<r;s++)S[f]=m*D>>G,S[f+1]=p*D>>G,S[f+2]=y*D>>G,m-=b,p-=x,y-=w,b-=P.r,x-=P.g,w-=P.b,u=g+((u=s+o+1)<B?u:B)<<2,m+=v+=P.r=S[u],p+=C+=P.g=S[u+1],y+=k+=P.b=S[u+2],P=P.next,b+=I=F.r,x+=E=F.g,w+=T=F.b,v-=I,C-=E,k-=T,F=F.next,f+=4;g+=r}for(s=0;s<r;s++){for(C=k=v=p=y=m=0,b=O*(I=S[f=s<<2]),x=O*(E=S[f+1]),w=O*(T=S[f+2]),m+=z*I,p+=z*E,y+=z*T,N=A,d=0;d<O;d++)N.r=I,N.g=E,N.b=T,N=N.next;for(h=r,d=1;d<=o;d++)f=h+s<<2,m+=(N.r=I=S[f])*(R=O-d),p+=(N.g=E=S[f+1])*R,y+=(N.b=T=S[f+2])*R,v+=I,C+=E,k+=T,N=N.next,d<L&&(h+=r);for(f=s,P=A,F=U,c=0;c<a;c++)S[u=f<<2]=m*D>>G,S[u+1]=p*D>>G,S[u+2]=y*D>>G,m-=b,p-=x,y-=w,b-=P.r,x-=P.g,w-=P.b,u=s+((u=c+O)<L?u:L)*r<<2,m+=v+=P.r=S[u],p+=C+=P.g=S[u+1],y+=k+=P.b=S[u+2],P=P.next,b+=I=F.r,x+=E=F.g,w+=T=F.b,v-=I,C-=E,k-=T,F=F.next,f+=r}l.putImageData(i,e,n)}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function PageBlur(t,e){if(document.getElementsByClassName?getElementsByClass=function(t,e){return(e||document).getElementsByClassName(t)}:getElementsByClass=function(t,e){var n,r,a=(e=e||document).getElementsByTagName("*"),o=a.length,i=t.split(/\s+/),l=i.length,s=[];for(n=0;n<o;n++)for(r=0;r<l;r++)if(-1!=a[n].className.search("\\b"+i[r]+"\\b")){s.push(a[n]);break}return s},void 0===t)t={};var n=document.getElementById(t.tScreen)||document.getElementById("screen"),r=t.wrapBlur||"wrapBlur",s=Math.floor(t.radius)||10,c=t.opti||!1,d=Math.floor(t.kOpti)||100,u=t.algorithm||"stack",h=1,f=getElementsByClass(r),g=f.length-1;html2canvas(n,{onrendered:function(t){c&&(100<d?d=100:d<1&&(d=1),(h=s/d)<1&&(h=1),s/=h);var e=t.width,n=t.height,r=Math.floor(e/h),a=Math.floor(n/h),o=document.body.appendChild(t),i=document.createElement("canvas");for(o.style.display="none",o.id="tc",i.width=r,i.height=a,i.id="fb",i.style.display="none",i.getContext("2d").drawImage(o,0,0,r,a),document.body.appendChild(i),function(t,e,n,r){"integral"===u?integralBlurCanvasRGB(t,0,0,e,n,r):"stack"===u&&stackBlurCanvasRGB(t,0,0,e,n,r)}(i.id,r,a,s);-1<g;g--){"true"===document.body.getAttribute("data-clean")&&f[g].removeChild(document.getElementById("blured"+g));var l=document.createElement("canvas");l.width=e,l.height=n,l.id="blured"+g,l.getContext("2d").drawImage(i,0,0,e,n),f[g].appendChild(l)}document.body.setAttribute("data-clean","true"),"true"===document.body.getAttribute("data-clean")&&(document.body.removeChild(document.getElementById("fb")),document.body.removeChild(document.getElementById("tc")))}}),e&&"function"==typeof e&&e()}!function(q,X,Y){"use strict";var o,e,i,l,c,Q={};function s(t,e,n){var r,a=t.runtimeStyle&&t.runtimeStyle[e],o=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(r=o.left,a&&(t.runtimeStyle.left=t.currentStyle.left),o.left="fontSize"===e?"1em":n||0,n=o.pixelLeft+"px",o.left=r,a&&(t.runtimeStyle.left=a)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function d(t){return parseInt(t,10)}function u(t,e,n,r,a,o){var i,l,s,c,d=Q.Util.getCSS(e,t,a);if(1===d.length&&(c=d[0],(d=[])[0]=c,d[1]=c),-1!==d[0].toString().indexOf("%"))s=parseFloat(d[0])/100,l=n.width*s,"backgroundSize"!==t&&(l-=(o||r).width*s);else if("backgroundSize"===t)if("auto"===d[0])l=r.width;else if(/contain|cover/.test(d[0])){var u=Q.Util.resizeBounds(r.width,r.height,n.width,n.height,d[0]);l=u.width,i=u.height}else l=parseInt(d[0],10);else l=parseInt(d[0],10);return"auto"===d[1]?i=l/r.width*r.height:-1!==d[1].toString().indexOf("%")?(s=parseFloat(d[1])/100,i=n.height*s,"backgroundSize"!==t&&(i-=(o||r).height*s)):i=parseInt(d[1],10),[l,i]}Q.Util={},Q.Util.log=function(t){Q.logging&&q.console&&q.console.log&&q.console.log(t)},Q.Util.trimText=(e=String.prototype.trim,function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}),Q.Util.asFloat=function(t){return parseFloat(t)},i=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,l=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,Q.Util.parseTextShadows=function(t){if(!t||"none"===t)return[];for(var e=t.match(i),n=[],r=0;e&&r<e.length;r++){var a=e[r].match(l);n.push({color:a[0],offsetX:a[1]?a[1].replace("px",""):0,offsetY:a[2]?a[2].replace("px",""):0,blur:a[3]?a[3].replace("px",""):0})}return n},Q.Util.parseBackgroundImage=function(t){function e(){n&&('"'===r.substr(0,1)&&(r=r.substr(1,r.length-2)),r&&c.push(r),"-"===n.substr(0,1)&&0<(o=n.indexOf("-",1)+1)&&(a=n.substr(0,o),n=n.substr(o)),d.push({prefix:a,method:n.toLowerCase(),value:i,args:c})),c=[],n=a=r=i=""}var n,r,a,o,i,l,s,c,d=[],u=0,h=0;e();for(var f=0,g=t.length;f<g;f++)if(l=t[f],!(0===u&&-1<" \r\n\t".indexOf(l))){switch(l){case'"':s?s===l&&(s=null):s=l;break;case"(":if(s)break;if(0===u){u=1,i+=l;continue}h++;break;case")":if(s)break;if(1===u){if(0===h){u=0,i+=l,e();continue}h--}break;case",":if(s)break;if(0===u){e();continue}if(1!==u||0!==h||n.match(/^url$/i))break;c.push(r),r="",i+=l;continue}i+=l,0===u?n+=l:r+=l}return e(),d},Q.Util.Bounds=function(t){var e,n={};return t.getBoundingClientRect&&(e=t.getBoundingClientRect(),n.top=e.top,n.bottom=e.bottom||e.top+e.height,n.left=e.left,n.width=t.offsetWidth,n.height=t.offsetHeight),n},Q.Util.OffsetBounds=function(t){var e=t.offsetParent?Q.Util.OffsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},Q.Util.getCSS=function(t,e,n){void 0!==t&&(o=X.defaultView.getComputedStyle(t,null));var r=o[e];if(/^background(Size|Position)$/.test(e))return function(t,e,n,r){if(t=(t=(t||"").split(","))[r||0]||t[0]||"auto",t=Q.Util.trimText(t).split(" "),"backgroundSize"!==n||t[0]&&!t[0].match(/cover|contain|auto/)){if(t[0]=-1===t[0].indexOf("%")?s(e,n+"X",t[0]):t[0],t[1]===Y){if("backgroundSize"===n)return t[1]="auto",t;t[1]=t[0]}t[1]=-1===t[1].indexOf("%")?s(e,n+"Y",t[1]):t[1]}else;return t}(r,t,e,n);if(/border(Top|Bottom)(Left|Right)Radius/.test(e)){var a=r.split(" ");return a.length<=1&&(a[1]=a[0]),a.map(d)}return r},Q.Util.resizeBounds=function(t,e,n,r,a){var o,i,l=t/e;return a&&"auto"!==a?n/r<l^"contain"===a?o=(i=r)*l:i=(o=n)/l:(o=n,i=r),{width:o,height:i}},Q.Util.BackgroundPosition=function(t,e,n,r,a){var o=u("backgroundPosition",t,e,n,r,a);return{left:o[0],top:o[1]}},Q.Util.BackgroundSize=function(t,e,n,r){var a=u("backgroundSize",t,e,n,r);return{width:a[0],height:a[1]}},Q.Util.Extend=function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},Q.Util.Children=function(t){var e,n,r;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:(n=t.childNodes,r=[],null!==n&&function(t,e){var n=t.length,r=0;if("number"==typeof e.length)for(var a=e.length;r<a;r++)t[n++]=e[r];else for(;e[r]!==Y;)t[n++]=e[r++];t.length=n}(r,n),r)}catch(t){Q.Util.log("html2canvas.Util.Children failed with exception: "+t.message),e=[]}return e},Q.Util.isTransparent=function(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t},Q.Util.Font=(c={},function(t,e,n){if(c[t+"-"+e]!==Y)return c[t+"-"+e];var r,a,o=n.createElement("div"),i=n.createElement("img"),l=n.createElement("span"),s="Hidden Text";return o.style.visibility="hidden",o.style.fontFamily=t,o.style.fontSize=e,o.style.margin=0,o.style.padding=0,n.body.appendChild(o),i.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",i.width=1,i.height=1,i.style.margin=0,i.style.padding=0,i.style.verticalAlign="baseline",l.style.fontFamily=t,l.style.fontSize=e,l.style.margin=0,l.style.padding=0,l.appendChild(n.createTextNode(s)),o.appendChild(l),o.appendChild(i),r=i.offsetTop-l.offsetTop+1,o.removeChild(l),o.appendChild(n.createTextNode(s)),o.style.lineHeight="normal",i.style.verticalAlign="super",a={baseline:r,lineWidth:1,middle:i.offsetTop-o.offsetTop+1},c[t+"-"+e]=a,n.body.removeChild(o),a}),function(){var n=Q.Util,t={};Q.Generate=t;var m=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];function d(t){return function(e){try{t.addColorStop(e.stop,e.color)}catch(t){n.log(["failed to add color stop: ",t,"; tried to add: ",e])}}}t.parseGradient=function(t,e){var n,r,a,o,i,l,s,c,d,u,h,f,g=m.length;for(r=0;r<g&&!(a=t.match(m[r]));r+=1);if(a)switch(a[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},i=a[2].match(/\w+/g))for(l=i.length,r=0;r<l;r+=1)switch(i[r]){case"top":n.y0=0,n.y1=e.height;break;case"right":n.x0=e.width,n.x1=0;break;case"bottom":n.y0=e.height,n.y1=0;break;case"left":n.x0=0,n.x1=e.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=e.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=e.height/2),i=a[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=i.length,s=1/Math.max(l-1,1),r=0;r<l;r+=1)(c=i[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/))[2]?(o=parseFloat(c[2]),"%"===c[3]?o/=100:o/=e.width):o=r*s,n.colorStops.push({color:c[1],stop:o});break;case"-webkit-gradient":if(n={type:"radial"===a[2]?"circle":a[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},(i=a[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/))&&(n.x0=i[1]*e.width/100,n.y0=i[2]*e.height/100,n.x1=i[3]*e.width/100,n.y1=i[4]*e.height/100),i=a[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(l=i.length,r=0;r<l;r+=1)c=i[r].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),o=parseFloat(c[2]),"from"===c[1]&&(o=0),"to"===c[1]&&(o=1),n.colorStops.push({color:c[3],stop:o});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},(i=a[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))&&(n.x0=i[1]*e.width/100,n.y0=i[2]*e.height/100,n.x1=e.width-n.x0,n.y1=e.height-n.y0),i=a[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(l=i.length,s=1/Math.max(l-1,1),r=0;r<l;r+=1)(c=i[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/))[2]?(o=parseFloat(c[2]),c[3]&&(o/=100)):o=r*s,n.colorStops.push({color:c[1],stop:o});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:e.width,y1:e.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},(i=a[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))&&(n.cx=i[1]*e.width/100,n.cy=i[2]*e.height/100),i=a[3].match(/\w+/),c=a[4].match(/[a-z\-]*/),i&&c)switch(c[0]){case"farthest-corner":case"cover":case"":d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),h=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(d,u,h,f);break;case"closest-corner":d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),h=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(d,u,h,f);break;case"farthest-side":"circle"===i[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=i[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===i[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=i[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(i=a[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=i.length,s=1/Math.max(l-1,1),r=0;r<l;r+=1)(c=i[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/))[2]?(o=parseFloat(c[2]),"%"===c[3]?o/=100:o/=e.width):o=r*s,n.colorStops.push({color:c[1],stop:o})}return n},t.Gradient=function(t,e){if(0!==e.width&&0!==e.height){var n,r,a=X.createElement("canvas"),o=a.getContext("2d");if(a.width=e.width,a.height=e.height,n=Q.Generate.parseGradient(t,e))switch(n.type){case"linear":r=o.createLinearGradient(n.x0,n.y0,n.x1,n.y1),n.colorStops.forEach(d(r)),o.fillStyle=r,o.fillRect(0,0,e.width,e.height);break;case"circle":r=o.createRadialGradient(n.cx,n.cy,0,n.cx,n.cy,n.rx),n.colorStops.forEach(d(r)),o.fillStyle=r,o.fillRect(0,0,e.width,e.height);break;case"ellipse":var i=X.createElement("canvas"),l=i.getContext("2d"),s=Math.max(n.rx,n.ry),c=2*s;i.width=i.height=c,r=l.createRadialGradient(n.rx,n.ry,0,n.rx,n.ry,s),n.colorStops.forEach(d(r)),l.fillStyle=r,l.fillRect(0,0,c,c),o.fillStyle=n.colorStops[n.colorStops.length-1].color,o.fillRect(0,0,a.width,a.height),o.drawImage(i,n.cx-n.rx,n.cy-n.ry,2*n.rx,2*n.ry)}return a}},t.ListAlpha=function(t){for(var e,n="";e=t%26,n=String.fromCharCode(64+e)+n,26<26*(t/=26););return n},t.ListRoman=function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],r=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],a="",o=n.length;if(t<=0||4e3<=t)return t;for(e=0;e<o;e+=1)for(;r[e]<=t;)t-=r[e],a+=n[e];return a}}(),Q.Parse=function(n,d){q.scroll(0,0);var t=d.elements===Y?X.body:d.elements[0],s=t.ownerDocument,f=Q.Util,l=f.Support(d,s),g=new RegExp("("+d.ignoreElements+")"),i=s.body,p=f.getCSS,m="___html2canvas___pseudoelement",e=s.createElement("style");function c(t,e){var n=parseInt(p(t,e),10);return isNaN(n)?0:n}function y(t,e,n,r,a,o){"transparent"!==o&&(t.setVariable("fillStyle",o),t.fillRect(e,n,r,a),1)}function u(t,e,n){if(0<t.length)return e+n.toUpperCase()}function h(t,e,n,r){null!==t&&0<f.trimText(t).length&&(r.fillText(t,e,n),1)}function b(t,e,n,r){var a=p(e,"fontWeight"),o=p(e,"fontFamily"),i=p(e,"fontSize"),l=f.parseTextShadows(p(e,"textShadow"));switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}if(t.setVariable("fillStyle",r),t.setVariable("font",[p(e,"fontStyle"),p(e,"fontVariant"),a,i,o].join(" ")),t.setVariable("textAlign","left"),l.length&&(t.setVariable("shadowColor",l[0].color),t.setVariable("shadowOffsetX",l[0].offsetX),t.setVariable("shadowOffsetY",l[0].offsetY),t.setVariable("shadowBlur",l[0].blur)),"none"!==n)return f.Font(o,i,s)}function x(t,e,n,r,a){var o;if(l.rangeBounds&&!a)"none"===n&&0===f.trimText(e).length||(o=function(t,e,n){var r=s.createRange();return r.setStart(e,n),r.setEnd(e,n+t.length),r.getBoundingClientRect()}(e,t.node,t.textOffset)),t.textOffset+=e.length;else if(t.node&&"string"==typeof t.node.nodeValue){var i=r?t.node.splitText(e.length):null;o=function(t,e){var n=t.parentNode,r=s.createElement("wrapper"),a=t.cloneNode(!0);r.appendChild(t.cloneNode(!0)),n.replaceChild(r,t);var o=e?f.OffsetBounds(r):f.Bounds(r);return n.replaceChild(a,r),o}(t.node,a),t.node=i}return o}function w(t,e,r){var a,o,i=r.ctx,l=p(t,"color"),s=p(t,"textDecoration"),n=p(t,"textAlign"),c={node:e,textOffset:0};0<f.trimText(e.nodeValue).length&&(e.nodeValue=function(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,u);case"uppercase":return t.toUpperCase();default:return t}}(e.nodeValue,p(t,"textTransform")),n=n.replace(["-webkit-auto"],["auto"]),o=!d.letterRendering&&/^(left|right|justify|auto)$/.test(n)&&function(t){return/^(normal|none|0px)$/.test(t)}(p(t,"letterSpacing"))?e.nodeValue.split(/(\b| )/):e.nodeValue.split(""),a=b(i,t,s,l),d.chinese&&o.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&((t=t.split("")).unshift(e,1),o.splice.apply(o,t))}),o.forEach(function(t,e){var n=x(c,t,s,e<o.length-1,r.transform.matrix);n&&(h(t,n.left,n.bottom,i),function(t,e,n,r,a){switch(e){case"underline":y(t,n.left,Math.round(n.top+r.baseline+r.lineWidth),n.width,1,a);break;case"overline":y(t,n.left,Math.round(n.top),n.width,1,a);break;case"line-through":y(t,n.left,Math.ceil(n.top+r.middle+r.lineWidth),n.width,1,a)}}(i,s,n,a,l))}))}function v(t,e){var n,r=function(t){var e=-1,n=1,r=t.parentNode.childNodes;if(t.parentNode){for(;r[++e]!==t;)1===r[e].nodeType&&n++;return n}return-1}(t);switch(e){case"decimal":n=r;break;case"decimal-leading-zero":n=1===r.toString().length?r="0"+r.toString():r.toString();break;case"upper-roman":n=Q.Generate.ListRoman(r);break;case"lower-roman":n=Q.Generate.ListRoman(r).toLowerCase();break;case"lower-alpha":n=Q.Generate.ListAlpha(r).toLowerCase();break;case"upper-alpha":n=Q.Generate.ListAlpha(r)}return n+". "}function C(t,e,n){var r,a,o=e.ctx,i=p(t,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(i)){if(a=function(t,e){var n,r,a=s.createElement("boundelement");return a.style.display="inline",n=t.style.listStyleType,t.style.listStyleType="none",a.appendChild(s.createTextNode(e)),t.insertBefore(a,t.firstChild),r=f.Bounds(a),t.removeChild(a),t.style.listStyleType=n,r}(t,r=v(t,i)),b(o,t,"none",p(t,"color")),"inside"!==p(t,"listStylePosition"))return;o.setVariable("textAlign","left"),h(r,n.left,a.bottom,o)}}function k(t){var e=n[t];return!(!e||!0!==e.succeeded)&&e.img}function I(t,e){var n=Math.max(t.left,e.left),r=Math.max(t.top,e.top);return{left:n,top:r,width:Math.min(t.left+t.width,e.left+e.width)-n,height:Math.min(t.top+t.height,e.top+e.height)-r}}function E(t,e,n){var r,a="static"!==e.cssPosition,o=a?p(t,"zIndex"):"auto",i=p(t,"opacity"),l="none"!==p(t,"cssFloat");e.zIndex=r=function(t){return{zindex:t,children:[]}}(o),r.isPositioned=a,r.isFloated=l,r.opacity=i,r.ownStacking="auto"!==o||i<1,n&&n.zIndex.children.push(e)}function T(t,e,n,r,a){var o=c(e,"paddingLeft"),i=c(e,"paddingTop"),l=c(e,"paddingRight"),s=c(e,"paddingBottom");N(t,n,0,0,n.width,n.height,r.left+o+a[3].width,r.top+i+a[0].width,r.width-(a[1].width+a[3].width+o+l),r.height-(a[0].width+a[2].width+i+s))}e.innerHTML="."+m+'-before:before { content: "" !important; display: none !important; }.'+m+'-after:after { content: "" !important; display: none !important; }',i.appendChild(e),n=n||{};var R,S=(R=(Math.sqrt(2)-1)/3*4,function(t,e,n,r){var a=n*R,o=r*R,i=t+n,l=e+r;return{topLeft:M({x:t,y:l},{x:t,y:l-o},{x:i-a,y:e},{x:i,y:e}),topRight:M({x:t,y:e},{x:t+a,y:e},{x:i,y:l-o},{x:i,y:l}),bottomRight:M({x:i,y:e},{x:i,y:e+o},{x:t+a,y:l},{x:t,y:l}),bottomLeft:M({x:i,y:l},{x:i-a,y:l},{x:t,y:e+o},{x:t,y:e})}});function M(l,s,c,d){function u(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}}return{start:l,startControl:s,endControl:c,end:d,subdivide:function(t){var e=u(l,s,t),n=u(s,c,t),r=u(c,d,t),a=u(e,n,t),o=u(n,r,t),i=u(a,o,t);return[M(l,e,a,i),M(i,o,r,d)]},curveTo:function(t){t.push(["bezierCurve",s.x,s.y,c.x,c.y,d.x,d.y])},curveToReversed:function(t){t.push(["bezierCurve",c.x,c.y,s.x,s.y,l.x,l.y])}}}function B(t,e,n,r,a,o,i){0<e[0]||0<e[1]?(t.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(t),r[1].curveTo(t)):t.push(["line",o,i]),(0<n[0]||0<n[1])&&t.push(["line",a[0].start.x,a[0].start.y])}function L(t,e,n,r,a,o,i){var l=[];return 0<e[0]||0<e[1]?(l.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(l)):l.push(["line",t.c1[0],t.c1[1]]),0<n[0]||0<n[1]?(l.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(l),l.push(["line",i[0].end.x,i[0].end.y]),i[0].curveToReversed(l)):(l.push(["line",t.c2[0],t.c2[1]]),l.push(["line",t.c3[0],t.c3[1]])),0<e[0]||0<e[1]?(l.push(["line",a[1].end.x,a[1].end.y]),a[1].curveToReversed(l)):l.push(["line",t.c4[0],t.c4[1]]),l}function O(t,e,n){var r,a,o,i,l,s,c=e.left,d=e.top,u=e.width,h=e.height,f=function(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return p(e,"border"+t+"Radius")})}(t),g=function(t,e,n){var r=t.left,a=t.top,o=t.width,i=t.height,l=e[0][0],s=e[0][1],c=e[1][0],d=e[1][1],u=e[2][0],h=e[2][1],f=e[3][0],g=e[3][1],m=o-c,p=i-h,y=o-u,b=i-g;return{topLeftOuter:S(r,a,l,s).topLeft.subdivide(.5),topLeftInner:S(r+n[3].width,a+n[0].width,Math.max(0,l-n[3].width),Math.max(0,s-n[0].width)).topLeft.subdivide(.5),topRightOuter:S(r+m,a,c,d).topRight.subdivide(.5),topRightInner:S(r+Math.min(m,o+n[3].width),a+n[0].width,m>o+n[3].width?0:c-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:S(r+y,a+p,u,h).bottomRight.subdivide(.5),bottomRightInner:S(r+Math.min(y,o+n[3].width),a+Math.min(p,i+n[0].width),Math.max(0,u-n[1].width),Math.max(0,h-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:S(r,a+b,f,g).bottomLeft.subdivide(.5),bottomLeftInner:S(r+n[3].width,a+b,Math.max(0,f-n[3].width),Math.max(0,g-n[2].width)).bottomLeft.subdivide(.5)}}(e,f,n),m={clip:function(t,e,n,r,a){var o=[];switch(p(t,"backgroundClip")){case"content-box":case"padding-box":B(o,r[0],r[1],e.topLeftInner,e.topRightInner,a.left+n[3].width,a.top+n[0].width),B(o,r[1],r[2],e.topRightInner,e.bottomRightInner,a.left+a.width-n[1].width,a.top+n[0].width),B(o,r[2],r[3],e.bottomRightInner,e.bottomLeftInner,a.left+a.width-n[1].width,a.top+a.height-n[2].width),B(o,r[3],r[0],e.bottomLeftInner,e.topLeftInner,a.left+n[3].width,a.top+a.height-n[2].width);break;default:B(o,r[0],r[1],e.topLeftOuter,e.topRightOuter,a.left,a.top),B(o,r[1],r[2],e.topRightOuter,e.bottomRightOuter,a.left+a.width,a.top),B(o,r[2],r[3],e.bottomRightOuter,e.bottomLeftOuter,a.left+a.width,a.top+a.height),B(o,r[3],r[0],e.bottomLeftOuter,e.topLeftOuter,a.left,a.top+a.height)}return o}(t,g,n,f,e),borders:[]};for(r=0;r<4;r++)if(0<n[r].width){switch(a=c,o=d,i=u,l=h-n[2].width,r){case 0:l=n[0].width,s=L({c1:[a,o],c2:[a+i,o],c3:[a+i-n[1].width,o+l],c4:[a+n[3].width,o+l]},f[0],f[1],g.topLeftOuter,g.topLeftInner,g.topRightOuter,g.topRightInner);break;case 1:s=L({c1:[(a=c+u-n[1].width)+(i=n[1].width),o],c2:[a+i,o+l+n[2].width],c3:[a,o+l],c4:[a,o+n[0].width]},f[1],f[2],g.topRightOuter,g.topRightInner,g.bottomRightOuter,g.bottomRightInner);break;case 2:s=L({c1:[a+i,(o=o+h-n[2].width)+(l=n[2].width)],c2:[a,o+l],c3:[a+n[3].width,o],c4:[a+i-n[3].width,o]},f[2],f[3],g.bottomRightOuter,g.bottomRightInner,g.bottomLeftOuter,g.bottomLeftInner);break;case 3:i=n[3].width,s=L({c1:[a,o+l+n[2].width],c2:[a,o],c3:[a+i,o+n[0].width],c4:[a+i,o+l]},f[3],f[0],g.bottomLeftOuter,g.bottomLeftInner,g.topLeftOuter,g.topLeftInner)}m.borders.push({args:s,color:n[r].color})}return m}function z(t,e){var n=t.drawShape();return e.forEach(function(t,e){n[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),n}function A(e,t,n){var r,a,o=s.createElement("valuewrap");["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"].forEach(function(t){try{o.style[t]=p(e,t)}catch(t){f.log("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}}),o.style.borderColor="black",o.style.borderStyle="solid",o.style.display="block",o.style.position="absolute",!/^(submit|reset|button|text|password)$/.test(e.type)&&"SELECT"!==e.nodeName||(o.style.lineHeight=p(e,"height")),o.style.top=t.top+"px",o.style.left=t.left+"px",r=(r="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value)||e.placeholder,a=s.createTextNode(r),o.appendChild(a),i.appendChild(o),w(e,a,n),i.removeChild(o)}function N(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),1}function U(t,e){var n=q.getComputedStyle(t,e);if(n&&n.content&&"none"!==n.content&&"-moz-alt-content"!==n.content&&"none"!==n.display){var r=n.content+"",a=r.substr(0,1);a===r.substr(r.length-1)&&a.match(/'|"/)&&(r=r.substr(1,r.length-2));var o="url"===r.substr(0,3),i=X.createElement(o?"img":"span");return i.className=m+"-before "+m+"-after",Object.keys(n).filter(P).forEach(function(e){try{i.style[e]=n[e]}catch(t){f.log(["Tried to assign readonly property ",e,"Error:",t])}}),o?i.src=f.parseBackgroundImage(r)[0].args[0]:i.innerHTML=r,i}}function P(t){return isNaN(q.parseInt(t,10))}function F(t,e,n,r){var a=Math.round(r.left+n.left),o=Math.round(r.top+n.top);t.createPattern(e),t.translate(a,o),t.fill(),t.translate(-a,-o)}function D(t,e,n,r,a,o,i,l){var s=[];s.push(["line",Math.round(a),Math.round(o)]),s.push(["line",Math.round(a+i),Math.round(o)]),s.push(["line",Math.round(a+i),Math.round(l+o)]),s.push(["line",Math.round(a),Math.round(l+o)]),z(t,s),t.save(),t.clip(),F(t,e,n,r),t.restore()}function G(t,e,n,r,a){var o=f.BackgroundSize(t,e,r,a),i=f.BackgroundPosition(t,e,r,a,o),l=p(t,"backgroundRepeat").split(",").map(f.trimText);switch(r=function(t,e){if(t.width===e.width&&t.height===e.height)return t;var n=s.createElement("canvas");return n.width=e.width,n.height=e.height,N(n.getContext("2d"),t,0,0,t.width,t.height,0,0,e.width,e.height),n}(r,o),l=l[a]||l[0]){case"repeat-x":D(n,r,i,e,e.left,e.top+i.top,99999,r.height);break;case"repeat-y":D(n,r,i,e,e.left+i.left,e.top,r.width,99999);break;case"no-repeat":D(n,r,i,e,e.left+i.left,e.top+i.top,r.width,r.height);break;default:F(n,r,i,{top:e.top,left:e.left,width:r.width,height:r.height})}}function V(t){return t.replace("px","")}var r,a,o,$=/(matrix)\((.+)\)/;function W(t,e,n,r){var a=function(t,e){var n=[];return{storage:n,width:t,height:e,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return n.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){return n.push({type:"variable",name:t,arguments:e}),e}}}(e?n.width:Math.max(Math.max(s.body.scrollWidth,s.documentElement.scrollWidth),Math.max(s.body.offsetWidth,s.documentElement.offsetWidth),Math.max(s.body.clientWidth,s.documentElement.clientWidth)),e?n.height:Math.max(Math.max(s.body.scrollHeight,s.documentElement.scrollHeight),Math.max(s.body.offsetHeight,s.documentElement.offsetHeight),Math.max(s.body.clientHeight,s.documentElement.clientHeight))),o={ctx:a,opacity:function(t,e,n){return t.setVariable("globalAlpha",p(e,"opacity")*(n?n.opacity:1))}(a,t,e),cssPosition:p(t,"position"),borders:function(e){return["Top","Right","Bottom","Left"].map(function(t){return{width:c(e,"border"+t+"Width"),color:p(e,"border"+t+"Color")}})}(t),transform:r,clip:e&&e.clip?f.Extend({},e.clip):null};return E(t,o,e),!0===d.useOverflow&&!0===/(hidden|scroll|auto)/.test(p(t,"overflow"))&&!1===/(BODY)/i.test(t.nodeName)&&(o.clip=o.clip?I(o.clip,n):n),o}function H(t,e,n,r){var a,o=function(t){var e,n=p(t,"transform")||p(t,"-webkit-transform")||p(t,"-moz-transform")||p(t,"-ms-transform")||p(t,"-o-transform"),r=p(t,"transform-origin")||p(t,"-webkit-transform-origin")||p(t,"-moz-transform-origin")||p(t,"-ms-transform-origin")||p(t,"-o-transform-origin")||"0px 0px";if(r=r.split(" ").map(V).map(f.asFloat),n&&"none"!==n){var a=n.match($);if(a)switch(a[1]){case"matrix":e=a[2].split(",").map(f.trimText).map(f.asFloat)}}return{origin:r,matrix:e}}(t),i=function(t,e){var n=e.matrix?f.OffsetBounds(t):f.Bounds(t);return e.origin[0]+=n.left,e.origin[1]+=n.top,n}(t,o),l=W(t,e,i,o),s=l.borders,c=l.ctx,d=function(t,e,n){var r={left:e.left+t[3].width,top:e.top+t[0].width,width:e.width-(t[1].width+t[3].width),height:e.height-(t[0].width+t[2].width)};return n&&(r=I(r,n)),r}(s,i,l.clip),u=O(t,i,s),h=g.test(t.nodeName)?"#efefef":p(t,"backgroundColor");switch(z(c,u.clip),c.save(),c.clip(),0<d.height&&0<d.width&&!r?(function(t,e,n){y(t,e.left,e.top,e.width,e.height,n)}(c,i,h),function(t,e,n){for(var r,a=p(t,"backgroundImage"),o=f.parseBackgroundImage(a),i=o.length;i--;){if((a=o[i]).args&&0!==a.args.length)(r=k("url"===a.method?a.args[0]:a.value))?G(t,e,n,r,i):f.log("html2canvas: Error loading background:",a)}}(t,d,c)):r&&(l.backgroundColor=h),c.restore(),u.borders.forEach(function(t){!function(t,e,n){"transparent"!==n&&(t.setVariable("fillStyle",n),z(t,e),t.fill(),1)}(c,t.args,t.color)}),n||function(t,e){var n=U(t,":before"),r=U(t,":after");(n||r)&&(n&&(t.className+=" "+m+"-before",t.parentNode.insertBefore(n,t),_(n,e,!0),t.parentNode.removeChild(n),t.className=t.className.replace(m+"-before","").trim()),r&&(t.className+=" "+m+"-after",t.appendChild(r),_(r,e,!0),t.removeChild(r),t.className=t.className.replace(m+"-after","").trim()))}(t,l),t.nodeName){case"IMG":(a=k(t.getAttribute("src")))?T(c,t,a,i,s):f.log("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&0<(t.value||t.placeholder||"").length&&A(t,i,l);break;case"TEXTAREA":0<(t.value||t.placeholder||"").length&&A(t,i,l);break;case"SELECT":0<(t.options||t.placeholder||"").length&&A(t,i,l);break;case"LI":C(t,l,d);break;case"CANVAS":T(c,t,t,i,s)}return l}function _(t,e,n){!function(t){return"none"!==p(t,"display")&&"hidden"!==p(t,"visibility")&&!t.hasAttribute("data-html2canvas-ignore")}(t)||(e=H(t,e,n,!1)||e,g.test(t.nodeName)||j(t,e,n))}function j(e,n,r){f.Children(e).forEach(function(t){t.nodeType===t.ELEMENT_NODE?_(t,n,r):t.nodeType===t.TEXT_NODE&&w(e,t,n)})}return r=p(X.documentElement,"backgroundColor"),a=f.isTransparent(r)&&t===X.body,o=H(t,null,!1,a),j(t,o),a&&(r=o.backgroundColor),i.removeChild(e),{backgroundColor:r,stack:o}},Q.Preload=function(i){var r,a,t,e,l={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},o=Q.Util,s=0,n=i.elements[0]||X.body,c=n.ownerDocument,d=n.getElementsByTagName("img"),u=d.length,h=c.createElement("a"),f=(new Image).crossOrigin!==Y;function g(){o.log("html2canvas: start: images: "+l.numLoaded+" / "+l.numTotal+" (failed: "+l.numFailed+")"),!l.firstRun&&l.numLoaded>=l.numTotal&&(o.log("Finished loading images: # "+l.numTotal+" (failed: "+l.numFailed+")"),"function"==typeof i.complete&&i.complete(l))}function m(t,e,n){var r,a,o=i.proxy;h.href=t,t=h.href,r="html2canvas_"+s++,n.callbackname=r,-1<o.indexOf("?")?o+="&":o+="?",o+="url="+encodeURIComponent(t)+"&callback="+r,a=c.createElement("script"),q[r]=function(t){"error:"===t.substring(0,6)?(n.succeeded=!1,l.numLoaded++,l.numFailed++,g()):(x(e,n),e.src=t),q[r]=Y;try{delete q[r]}catch(t){}a.parentNode.removeChild(a),a=null,delete n.script,delete n.callbackname},a.setAttribute("type","text/javascript"),a.setAttribute("src",o),n.script=a,q.document.body.appendChild(a)}function p(t,e){var n=q.getComputedStyle(t,e),r=n.content;"url"===r.substr(0,3)&&a.loadImage(Q.Util.parseBackgroundImage(r)[0].args[0]),b(n.backgroundImage,t)}function y(t){return t&&t.method&&t.args&&0<t.args.length}function b(t,e){var n;Q.Util.parseBackgroundImage(t).filter(y).forEach(function(t){"url"===t.method?a.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(n===Y&&(n=Q.Util.Bounds(e)),function(t,e){var n=Q.Generate.Gradient(t,e);n!==Y&&(l[t]={img:n,succeeded:!0},l.numTotal++,l.numLoaded++,g())}(t.value,n))})}function x(e,n){e.onload=function(){n.timer!==Y&&q.clearTimeout(n.timer),l.numLoaded++,n.succeeded=!0,e.onerror=e.onload=null,g()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(q.clearTimeout(n.timer),i.proxy)){var t=e.src;return e=new Image,(n.img=e).src=t,void m(e.src,e,n)}l.numLoaded++,l.numFailed++,n.succeeded=!1,e.onerror=e.onload=null,g()}}for(h.href=q.location.href,r=h.protocol+h.host,a={loadImage:function(t){var e,n;t&&l[t]===Y&&(e=new Image,t.match(/data:image\/.*;base64,/i)?(e.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),n=l[t]={img:e},l.numTotal++,x(e,n)):!function(t){return h.href=t,h.href=h.href,h.protocol+h.host===r}(t)&&!0!==i.allowTaint?f&&!i.allowTaint&&i.useCORS?(e.crossOrigin="anonymous",n=l[t]={img:e},l.numTotal++,x(e,n),e.src=t):i.proxy&&(n=l[t]={img:e},l.numTotal++,m(t,e,n)):(n=l[t]={img:e},l.numTotal++,x(e,n),e.src=t))},cleanupDOM:function(t){var e,n;if(!l.cleanupDone){for(n in t&&"string"==typeof t?o.log("html2canvas: Cleanup because: "+t):o.log("html2canvas: Cleanup after timeout: "+i.timeout+" ms."),l)if(l.hasOwnProperty(n)&&"object"==typeof(e=l[n])&&e.callbackname&&e.succeeded===Y){q[e.callbackname]=Y;try{delete q[e.callbackname]}catch(t){}e.script&&e.script.parentNode&&(e.script.setAttribute("src","about:blank"),e.script.parentNode.removeChild(e.script)),l.numLoaded++,l.numFailed++,o.log("html2canvas: Cleaned up failed img: '"+n+"' Steps: "+l.numLoaded+" / "+l.numTotal)}q.stop!==Y?q.stop():X.execCommand!==Y&&X.execCommand("Stop",!1),X.close!==Y&&X.close(),l.cleanupDone=!0,t&&"string"==typeof t||g()}},renderingDone:function(){e&&q.clearTimeout(e)}},0<i.timeout&&(e=q.setTimeout(a.cleanupDOM,i.timeout)),o.log("html2canvas: Preload starts: finding background-images"),l.firstRun=!0,function t(e){var n=!1;try{o.Children(e).forEach(t)}catch(t){}try{n=e.nodeType}catch(t){n=!1,o.log("html2canvas: failed to access some element's nodeType - Exception: "+t.message)}if(1===n||n===Y){!function(t){p(t,":before"),p(t,":after")}(e);try{b(o.getCSS(e,"backgroundImage"),e)}catch(t){o.log("html2canvas: failed to get background-image - Exception: "+t.message)}b(e)}}(n),o.log("html2canvas: Preload: Finding images"),t=0;t<u;t+=1)a.loadImage(d[t].getAttribute("src"));return l.firstRun=!1,o.log("html2canvas: Preload: Done."),l.numTotal===l.numLoaded&&g(),a},Q.Renderer=function(t,n){return function(t){var e;if("string"==typeof n.renderer&&Q.Renderer[t]!==Y)e=Q.Renderer[t](n);else{if("function"!=typeof t)throw new Error("Unknown renderer");e=t(n)}if("function"!=typeof e)throw new Error("Invalid renderer defined");return e}(n.renderer)(t,n,X,(e=t.stack,l=[],function e(t,n,r){var a="auto"===n.zIndex.zindex?0:Number(n.zIndex.zindex),o=t,i=n.zIndex.isPositioned,l=n.zIndex.isFloated,s={node:n},c=r;n.zIndex.ownStacking?(o=s.context={"!":[{node:n,children:[]}]},c=Y):(i||l)&&(c=s.children=[]),0===a&&r?r.push(s):(t[a]||(t[a]=[]),t[a].push(s)),n.zIndex.children.forEach(function(t){e(o,t,c)})}(r={},e),function o(i){Object.keys(i).sort().forEach(function(t){var e=[],n=[],r=[],a=[];i[t].forEach(function(t){t.node.zIndex.isPositioned||t.node.zIndex.opacity<1?r.push(t):t.node.zIndex.isFloated?n.push(t):e.push(t)}),function e(t){t.forEach(function(t){a.push(t),t.children&&e(t.children)})}(e.concat(n,r)),a.forEach(function(t){t.context?o(t.context):l.push(t.node)})})}(r),l),Q);var e,r,l},Q.Util.Support=function(t,r){return{rangeBounds:(a=!1,r.createRange&&(e=r.createRange()).getBoundingClientRect&&((n=r.createElement("boundtest")).style.height="123px",n.style.display="block",r.body.appendChild(n),e.selectNode(n),123===e.getBoundingClientRect().height&&(a=!0),r.body.removeChild(n)),a),svgRendering:t.svgRendering&&function(){var t=new Image,e=r.createElement("canvas"),n=e.getContext!==Y&&e.getContext("2d");if(!1===n)return!1;e.width=e.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{n.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return Q.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}()};var e,n,a},q.html2canvas=function(t,e){var n,r,a={logging:!1,elements:t=t.length?t:[t],background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return a=Q.Util.Extend(e,a),Q.logging=a.logging,a.complete=function(t){"function"==typeof a.onpreloaded&&!1===a.onpreloaded(t)||(n=Q.Parse(t,a),"function"==typeof a.onparsed&&!1===a.onparsed(n)||(r=Q.Renderer(n,a),"function"==typeof a.onrendered&&a.onrendered(r)))},q.setTimeout(function(){Q.Preload(a)},0),{render:function(t,e){return Q.Renderer(t,Q.Util.Extend(e,a))},parse:function(t,e){return Q.Parse(t,Q.Util.Extend(e,a))},preload:function(t){return Q.Preload(Q.Util.Extend(t,a))},log:Q.Util.log}},q.html2canvas.log=Q.Util.log,q.html2canvas.Renderer={Canvas:Y},Q.Renderer.Canvas=function(n){n=n||{};var r=X,a=[],o=X.createElement("canvas"),i=o.getContext("2d"),d=Q.Util,u=n.canvas||r.createElement("canvas");function h(t,e){switch(e.type){case"variable":t[e.name]=e.arguments;break;case"function":switch(e.name){case"createPattern":if(0<e.arguments[0].width&&0<e.arguments[0].height)try{t.fillStyle=t.createPattern(e.arguments[0],"repeat")}catch(t){d.log("html2canvas: Renderer: Error creating pattern",t.message)}break;case"drawShape":!function(e,t){e.beginPath(),t.forEach(function(t){e[t.name].apply(e,t.arguments)}),e.closePath()}(t,e.arguments);break;case"drawImage":0<e.arguments[8]&&0<e.arguments[7]&&(!n.taintTest||n.taintTest&&function(t){if(-1===a.indexOf(t.arguments[0].src)){i.drawImage(t.arguments[0],0,0);try{i.getImageData(0,0,1,1)}catch(t){return o=r.createElement("canvas"),i=o.getContext("2d"),!1}a.push(t.arguments[0].src)}return!0}(e))&&t.drawImage.apply(t,e.arguments);break;default:t[e.name].apply(t,e.arguments)}}}return function(t,e,n,r,a){var o,i,l,s=u.getContext("2d"),c=t.stack;return u.width=u.style.width=e.width||c.ctx.width,u.height=u.style.height=e.height||c.ctx.height,l=s.fillStyle,s.fillStyle=d.isTransparent(c.backgroundColor)&&e.background!==Y?e.background:t.backgroundColor,s.fillRect(0,0,u.width,u.height),s.fillStyle=l,r.forEach(function(t){s.textBaseline="bottom",s.save(),t.transform.matrix&&(s.translate(t.transform.origin[0],t.transform.origin[1]),s.transform.apply(s,t.transform.matrix),s.translate(-t.transform.origin[0],-t.transform.origin[1])),t.clip&&(s.beginPath(),s.rect(t.clip.left,t.clip.top,t.clip.width,t.clip.height),s.clip()),t.ctx.storage&&t.ctx.storage.forEach(function(t){h(s,t)}),s.restore()}),d.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===e.elements.length&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(i=a.Util.Bounds(e.elements[0]),(o=n.createElement("canvas")).width=Math.ceil(i.width),o.height=Math.ceil(i.height),(s=o.getContext("2d")).drawImage(u,i.left,i.top,i.width,i.height,0,0,i.width,i.height),u=null,o):u}}}(window,document);